'use strict';

import React from 'react';
import { renderToString } from 'react-dom/server';

import TestTwo from './test-two.view';
import TestTwoModel from './test-two.model';
import renderLayout from '../layout';

export default {
  get: get
}

function get(req, res) {
  let testTwo = new TestTwoModel(req.params.location)

  testTwo.get().then(page => {
    const initialState = {};

    const appString = renderToString(<TestTwo {...initialState} />);

    res.send(renderLayout({
        body: appString,
        title: 'Web Development',
        assetKey: 'test-two.js', // this is the key from js-manifest.json (generated by build)
        initialState: JSON.stringify(initialState)
      }))

  })
  .catch(err => {
    console.error(err);
    res.status(400).send('ERROR: ' + err);
  });
}
